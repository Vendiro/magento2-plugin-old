<?php
/**
 *
 *          ..::..
 *     ..::::::::::::..
 *   ::'''''':''::'''''::
 *   ::..  ..:  :  ....::
 *   ::::  :::  :  :   ::
 *   ::::  :::  :  ''' ::
 *   ::::..:::..::.....::
 *     ''::::::::::::''
 *          ''::''
 *
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Creative Commons License.
 * It is available through the world-wide-web at this URL:
 * http://creativecommons.org/licenses/by-nc-nd/3.0/nl/deed.en_US
 * If you are unable to obtain it through the world-wide-web, please send an email
 * to servicedesk@totalinternetgroup.nl so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this module to newer
 * versions in the future. If you wish to customize this module for your
 * needs please contact servicedesk@tig.nl for more information.
 *
 * @copyright   Copyright (c) Total Internet Group B.V. https://tig.nl/copyright
 * @license     http://creativecommons.org/licenses/by-nc-nd/3.0/nl/deed.en_US
 */
/**
 * @var TIG\Vendiro\Block\Adminhtml\Shipment\Options\Create $this;
 */
?>
<div id="vendiro_shipping_options" class="field admin__field admin__field-option field-vendiro-carriers">
    <label for="tig_vendiro_carrier"
           class="admin__field-label tig_vendiro_shipment_options">
        <span><?php /* @escapeNotVerified */ echo __('Vendiro Shipping options') ?></span>
    </label>
    <select id="tig_vendiro_carrier"
            name="shipment[tig_vendiro_carrier]"
            class="admin__control-select tig_vendiro_carrier_options">
        <?php $options[] = ['value' => '0', 'label' => __('--none--')];

        foreach ($this->getItems() as $carrier) {
            array_push($options, ['value'=> $carrier->getCarrierId(), 'label' => __($carrier->getCarrier())]);
        } ?>

        <?php
        $defaultCarrier = $this->getDefaultCarrier();
        ?>

        <?php foreach ($options as $carrier) :?>
            <option value="<?php echo $carrier['value']; ?>" <?php echo $defaultCarrier == $carrier['value'] ? 'selected="selected"' : ''; ?>><?php echo __($carrier['label']->getText()); ?></option>
        <?php endforeach; ?>
    </select>
</div>
<!-- Javascript to append the vendiro div inside the form elements -->
<script>
    require([
        "jquery"
    ], function (jQuery) {
        var items = jQuery('.admin__page-section-item-content');
        var field = items.find('.order-history-comments-actions');
        jQuery(function () {
            field.before(jQuery('#vendiro_shipping_options'));
        });
    })
</script>